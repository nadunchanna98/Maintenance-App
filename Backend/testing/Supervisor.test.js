const axios = require("axios");

const MockData = [
  {
    _id: "64afaa93e42188ce74916822",
    userID: "64afaa7be42188ce74916812",
    approvedby: "64a8ea45b1bcd10012052b55",
    approved_date: "2023-07-13T07:41:07.899Z",
    requested_date: "2023-07-13T07:40:43.666Z",
    complains: ["64a6fe8f00de6dff16314f3e", "64a6fe8f00de6dff16314f3e"],
    __v: 2,
    userDetails: {
      _id: "64afaa7be42188ce74916812",
      name: "Imakla madu",
      email: "imalka@gmail.com",
      mobile_no: "0888888888",
      password: "$2b$10$R2gMqp/u/wByChSMggYo/uGjIgN1Uc6.hGHzQTteAWSVgv2ISxgJC",
      role: "supervisor",
      complainer_type: "other",
      complains: [
        "64b4d0598f5f38bab8bcc19b",
        "64b4d0798f5f38bab8bcc19e",
        "64b4d0978f5f38bab8bcc1a2",
        "64b4d0a98f5f38bab8bcc1a5",
        "64b4d0cf8f5f38bab8bcc1bd",
        "64b4d116ea8c351997793d86",
        "64b4d14bea8c351997793d8f",
        "64b4d163ea8c351997793da3",
        "64b4d1b2ea8c351997793daa",
      ],
      __v: 0,
    },
  },
  {
    _id: "64b0c3339a4a523f7595fc9e",
    userID: "64b0c3059a4a523f7595fc8d",
    approvedby: "64a8ea45b1bcd10012052b55",
    approved_date: "2023-07-14T03:38:27.491Z",
    requested_date: "2023-07-14T03:37:41.837Z",
    complains: [],
    __v: 0,
    userDetails: {
      _id: "64b0c3059a4a523f7595fc8d",
      name: "Nipun Harsha",
      email: "test@gmail.com",
      mobile_no: "0717963047",
      password: "$2b$10$KE.4zASVPS5ksjD/r8ZaFOvaTPYJOMnbR1v2sMHeE3CtEbF3r9g36",
      role: "supervisor",
      complainer_type: "other",
      complains: [],
      __v: 0,
    },
  },
  {
    _id: "64b58296fcf1017037b07c19",
    userID: "64b16118ad6741b2676c373c",
    approvedby: "64a8ea45b1bcd10012052b55",
    approved_date: "2023-07-17T18:04:06.270Z",
    requested_date: "2023-07-17T18:04:06.267Z",
    complains: [],
    __v: 0,
    userDetails: {
      _id: "64b16118ad6741b2676c373c",
      name: "Test",
      email: "test@email.com",
      mobile_no: "0987654321",
      password: "$2b$10$gFWuJi6jvbLZHRxQ4ovKnOiLsxzTH8Y30xhBGO1agkp7AkvWhhh.q",
      role: "supervisor",
      accepted: false,
      complainer_type: "other",
      complains: [],
      __v: 0,
    },
  },
  {
    _id: "64b93443a9525e697dff8908",
    userID: "64b9342ea9525e697dff88f6",
    approvedby: "64a71de5f434fcdfeee605ae",
    approved_date: "2023-07-20T13:18:59.742Z",
    requested_date: "2023-07-20T13:18:38.101Z",
    complains: [],
    __v: 0,
    userDetails: {
      _id: "64b9342ea9525e697dff88f6",
      name: "Chamath perera",
      email: "chmath@gmail.com",
      mobile_no: "0778899445",
      password: "$2b$10$95YWigNi5w677vkJ1vnvZ.p5zWj9qjS0M.OLoFm6bM9hhI6fih7Qq",
      role: "supervisor",
      complainer_type: "other",
      complains: [],
      __v: 0,
    },
  },
  {
    _id: "64bad4d09b380325c84c9cae",
    userID: "64b9510d74708ce7b1b02bfd",
    work_type: "Electric ",
    approvedby: "64a8ea45b1bcd10012052b55",
    approved_date: "2023-07-21T18:56:16.346Z",
    requested_date: "2023-07-20T15:21:49.367Z",
    complains: [],
    __v: 0,
    userDetails: {
      _id: "64b9510d74708ce7b1b02bfd",
      name: "Charaka viduranga",
      email: "charaka@gmail.com",
      mobile_no: "0444555666",
      password: "$2b$10$tWHzRD6XyhH.hW8zIjI1xuA8UCmCMBVfP/YfnsZS/zRMwnskCQ0ty",
      role: "supervisor",
      complainer_type: "other",
      complains: [],
      __v: 0,
    },
  },
  {
    _id: "64bad4d69b380325c84c9cb8",
    userID: "64b94fa274708ce7b1b02b93",
    work_type: "Water",
    approvedby: "64a8ea45b1bcd10012052b55",
    approved_date: "2023-07-21T18:56:22.079Z",
    requested_date: "2023-07-20T15:15:46.108Z",
    complains: [],
    __v: 0,
    userDetails: {
      _id: "64b94fa274708ce7b1b02b93",
      name: "Nagul nagul",
      email: "nagul@gmail.com",
      mobile_no: "0111222333",
      password: "$2b$10$lqsWqgMn/SmiTfE4v/9EluLE9SztSkpM0N5KJeLS6pk2CE6wH6Zyu",
      role: "supervisor",
      complainer_type: "other",
      complains: [],
      __v: 0,
    },
  },
  {
    _id: "64bad72b9b380325c84c9d3c",
    userID: "64bad53a9b380325c84c9d24",
    work_type: "Pipeline",
    approvedby: "64a8ea45b1bcd10012052b55",
    approved_date: "2023-07-21T19:06:19.453Z",
    requested_date: "2023-07-21T18:58:02.857Z",
    complains: [],
    __v: 0,
    userDetails: {
      _id: "64bad53a9b380325c84c9d24",
      name: "Anuka Mithara Karunanayaka",
      email: "abc@gmail.con",
      mobile_no: "0774268103",
      password: "$2b$10$AgoJWCovN6ohNDymB6VCHeOcHsbii.XvsFR27CfcE371OxtUv5FAm",
      role: "supervisor",
      complainer_type: "other",
      complains: [],
      __v: 0,
    },
  },
  {
    _id: "64bad8349b380325c84c9d86",
    userID: "64bad7759b380325c84c9d74",
    work_type: "",
    approvedby: "64a8ea45b1bcd10012052b55",
    approved_date: "2023-07-21T19:10:44.559Z",
    requested_date: "2023-07-21T19:07:33.106Z",
    complains: [],
    __v: 0,
    userDetails: {
      _id: "64bad7759b380325c84c9d74",
      name: "Yasiru kawsala",
      email: "kawas@gmail.com",
      mobile_no: "0761234568",
      password: "$2b$10$zhVkxF1JUGWMO8xJGFm.N.E.5QC1HUhO..HPkGcAaQ.7XVRKI63ju",
      role: "supervisor",
      complainer_type: "other",
      complains: [],
      __v: 0,
    },
  },
  {
    _id: "64bad9ec9b380325c84c9e1e",
    userID: "64bad8619b380325c84c9dc4",
    work_type: "",
    approvedby: "64a8ea45b1bcd10012052b55",
    approved_date: "2023-07-21T19:18:04.926Z",
    requested_date: "2023-07-21T19:11:29.982Z",
    complains: [],
    __v: 0,
    userDetails: {
      _id: "64bad8619b380325c84c9dc4",
      name: "Keshawa Y",
      email: "keshaw99@gmail.com",
      mobile_no: "0882555889",
      password: "$2b$10$v6AEsW0750tMH537gw.s0eE9s2KwINCzuEInb8z3GL138X4FGUrBi",
      role: "supervisor",
      complainer_type: "other",
      complains: [],
      __v: 0,
    },
  },
  {
    _id: "64badb0b9b380325c84c9e28",
    userID: "64bad8a29b380325c84c9e06",
    work_type: "",
    approvedby: "64a8ea45b1bcd10012052b55",
    approved_date: "2023-07-21T19:22:51.193Z",
    requested_date: "2023-07-21T19:12:34.348Z",
    complains: ["64b3b794eb869c0183e70730"],
    __v: 1,
    userDetails: {
      _id: "64bad8a29b380325c84c9e06",
      name: "Kostha T",
      email: "Kostha@gmail.com",
      mobile_no: "0756856559",
      password: "$2b$10$G9iHgeGYy20C8oX7Ra/Mn.j8LwcStpUh/CxSf5l/esyHdkOxtoJCe",
      role: "supervisor",
      complainer_type: "other",
      complains: [],
      __v: 0,
    },
  },
];

test("API should return the mock data", async () => {
  const response = await axios.get(
    "https://maintenance-app-m996.onrender.com/api/v1/supervisors/list"
  );
  const supervisor = response.data;
  console.log(supervisor);
  let matchFound = false;
  for (let i = 0; i < MockData.length; i++) {
    matchFound = false;
    for (let j = 0; j < supervisor.length; j++) {
      if (supervisor[j]._id == MockData[i]._id) {
        matchFound = true;
        break;
      }
    }
    expect(matchFound).toBe(true);
  }
});
